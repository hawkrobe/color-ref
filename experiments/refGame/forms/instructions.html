
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="/lib/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- Custom styles for this template -->
    <!-- <link href="theme.css" rel="stylesheet"> -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5"
	     aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
	  <span class="sr-only">5% Complete</span>
	</div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

	<h2><center>Color Communication Game</center>  </h2>

	<p>
	  In this experiment you will play a fun communication game
	  with another turker! One of you will be assigned the <b>Speaker</b> role and
	  the other will be the <b>Listener</b>. On each round of the game, you will
    be shown 4 words and a set of colors.
	</p>

  <p>
    If you are the <b>Speaker</b>, you will
    see one of these words indicated as the <i>target word</i>:
	</p>

	<p>
	  <center>
	    <img src="images/color-ref-images/speaker-1.png" alt="Speaker view: target word is indicated"
		 style="width:500px; height:300px">
	  </center>
	</p>

	<p>
	  The goal of the <b>Speaker</b> is to select the color you believe will best
    communicate the target word so that the Listener will be able to figure out
    which word is the target.
	</p>

  <p>
	  <center>
	    <img src="images/color-ref-images/speaker-2.png" alt="Speaker view: color chosen"
		 style="width:500px; height:300px">
	  </center>
	</p>

  <p>
	  You'll both get <b> a bonus of $0.02 for each correct response</b>, so pay attention!
	</p>

	<p>
	  The goal of the <b>Listener</b> is to identify the target word based on
	  the color sent by the Speaker. If you are the Listener,
	  you will first need to wait until the Speaker has selected their
	  color before being able to click on the word you think they're trying
    to communicate (the target word). The color the Speaker has selected will
    be indicated in a white outline:
	</p>

  <p>
	  <center>
	    <img src="images/color-ref-images/listener-1.png" alt="Listener view: color chosen by Speaker is shown"
		 style="width:500px; height:300px">
	  </center>
	</p>

	<p>
	  Once the Listener clicks on the word they believe is the
	  target, both players will be given feedback: the Speaker
	  will see what color the Listener clicked, and the Listener will
	  see the true target word. Then you will both automatically
	  advance to the next round of words. There are a total
	  of <b>24 rounds</b>. After the final round you will complete a short post-test
    and be on your way.
	</p>

  <p>
    <center>
      <img src="images/color-ref-images/listener-2.png" alt="Listener view: Listener chooses word and receives feedback"
     style="width:500px; height:300px">
    </center>
  </p>


	<p> A few final notes: First, since you are playing with
	  another player, you may see this screen before the game
	  begins:
	</p>

	<p>
	  <center><img src="images/color-ref-images/wait-screen.png" alt="wait screen"
		       style="width:500px;height:350px">
	  </center>
	</p>

	<p>
	  Just hold tight. Another player should join the game within
	  the next few minutes. If you're in the waiting room for 10 minutes
	  without another player joining, please return the HIT and try again later!
	</p>

	<p>
	  Second, please be respectful of the worker you're playing
	  with: try to communicate the color you believe will be most informative to
    your partner, and try to select the word you believe to be the target.
	</p>

	<p>
	  Finally, please DO NOT refresh the page at any point once
	  you start the game (including the waiting page). If you
	  refresh, you will not be able to rejoin the game you were in
	  and you may not be able to submit the HIT. <br> Thank you!
	</p>

	<h3>Please fill out this short quiz below before getting started.</h3>
	<h3>Good luck and have fun!</h3>
      </div>

      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

	<br>
	The <b>listener</b> is shown the target word.
	<br>
	<input type="radio" name="sgoal" value="no"> True
	<br>
	<input type="radio" name="sgoal" value="yes"> False
	<br>


	<br>
	The <b>speaker</b> wants to click on the color that they believe will
  allow their partner to determine the target word.
	<br>
	<input type="radio" name="lgoal" value="yes"> True
	<br>
	<input type="radio" name="lgoal" value="no"> False
	<br>

	<br>
	The <b>speaker</b> clicks on the word they believe is the target word.
	<br>
	<input type="radio" name="comp" value="no"> True
	<br>
	<input type="radio" name="comp" value="yes"> False
	<br>

	<br>
	Have you participated in this study before?
        <br>
        <input type="radio" name="completed" value="no"> Yes
        <br>
        <input type="radio" name="completed" value="yes"> No
        <br>

	<br>
	<input id="quiz_submit" type="submit" value="Submit">
	<br>
	<br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
      </div> <!-- /container -->
    </div>

    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="sgoal"]:checked').val();
        var ans2 = $('input[name="lgoal"]:checked').val();
        var ans3 = $('input[name="comp"]:checked').val();
        var ans4 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
           ans4 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="/lib/js/bootstrap.min.js"></script>
  </body>
</html>
