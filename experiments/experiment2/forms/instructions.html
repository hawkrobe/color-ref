
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title>Experiment</title>


    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  </head>

  <body role="document">

    <div class="container" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5"
	     aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
	  <span class="sr-only">5% Complete</span>
	</div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">
	<h2><center>Color Communication Game</center></h2>
	<p>
	  In this experiment you will play a fun communication game
	  with another turker! The game is like Pictionary or Charades, but instead of drawing or acting out concepts, you will be using colors to communicate!
	</p>

	<p> After being paired with a partner, one of you will be
	  randomly assigned the <b>Speaker</b> role and the other will
	  be the <b>Listener</b>. You will both see the same set of 4 words and 88 color chips.
	</p>

	<p>
	  If you are the <b>Speaker</b>, you will see one of the four
	  words indicated as the <i>target word</i>. In this example, the target is "tomato."
	</p>

	<p>
	  <center>
	    <img src="images/color-ref-images/speaker-1.png"
		 alt="Speaker view: target word is indicated"
		 style="width:500px; height:300px">
	  </center>
	</p>

	<p>
	  Your goal is to send a color as a message that will allow
	  you partner to correctly choose the target word from the
	  set. You can send your message by clicking on a color:
	</p>

	<p>
	  <center>
	    <img src="images/color-ref-images/speaker-2.png"
		 alt="Speaker view: color chosen"
		 style="width:500px; height:300px">
	  </center>
	</p>

	<p>
	  You'll both get <b> a bonus of $0.03 for each correct
	    response</b>, so think carefully about the color you send!
	</p>

	<p>
	  The goal of the <b>Listener</b> is to identify the target
	  word based on the color that the Speaker sends. The color
	  the Speaker has selected will be indicated by a white
	  outline:
	</p>

	<p>
	  <center>
	    <img src="images/color-ref-images/listener-1.png"
		 alt="Listener view: color chosen by Speaker is shown"
		 style="width:500px; height:300px">
	  </center>
	</p>

	<p>
	  You will register your guess by clicking on one of the four
	  words. Please note that you will need to wait until the
	  Speaker has sent their message before being able to click on
	  the word you think they're trying to communicate.  Once the
	  Listener has made a decision, both players are given
	  feedback: the Speaker see what the Listener chose, and the
	  Listener will see the true target. Then you will both
	  automatically advance to the next round, where a different word
	  will be chosen as the target.
	</p>

	<p>
	  There are a total of <b>48 rounds</b>, where you will see
	  the same word as targets multiple times! After every 8
	  rounds you will swap roles, so please make sure you
	  understand the instructions for both the Speaker and the
	  Listener. At the beginning and end of the game, we will ask
	  you a few additional questions. Overall, we expect this HIT
	  to take about 20 minutes. You will be paid a base rate of
	  $0.50 just for reading these instructions, a performance
	  bonus of $0.03 for each correct response, and a completion
	  bonus of $3.00 upon reaching the end of the experiment, for
	  a possible total reaching $4.94.
	</p>

	<p>
	  <center>
	    <img src="images/color-ref-images/listener-2.png"
		 alt="Listener view: Listener chooses word and receives feedback"
		 style="width:500px; height:300px">
	  </center>
	</p>

	<p>
	  A few final notes: First, since you are playing with another
	  player, you may see this screen before the game begins:
	</p>

	<p>
	  <center>
	    <img src="images/color-ref-images/wait-screen.png" alt="wait screen"
		 style="width:500px;height:350px">
	  </center>
	</p>

	<p>
	  Just hold tight. Another player should join the game within
	  the next few minutes. If you're in the waiting room for 10 minutes
	  without another player joining, please return the HIT and try again later!
	</p>

	<p>
	  Second, please be respectful of the worker you're playing
	  with: try to communicate the color you believe will be most informative to
	  your partner, and try to select the word you believe to be the target.
	</p>

	<p>
    Please also ensure that you are taking this experiment on a desktop or
    laptop computer and that your screen is set to its default brightness and
    color temperature (e.g. turn off flux).
  </p>

  <p>
	  Finally, please DO NOT refresh the page at any point once
	  you start the game (including the waiting page). If you
	  refresh, you will not be able to rejoin the game you were in
	  and you may not be able to submit the HIT. <br> Thank you!
	</p>

	<h5>Please fill out this short quiz below before getting started. Good luck and have fun!</h5>

      </div>

      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

    <p>
  	  The following images are intended to test your color vision. For each image,
      enter the number you see in the image. If you are unsure or do not see
      anything, type "None".
  	</p>


  <br>
  <img src="Plate2.gif"
  alt="image for colorbindness test"
  style="width:200px; height:200px">
  <br>
  <input type="text" id="plate2" name="plate2" size="10">
  <br>

  <br>
  <img src="Plate4.gif"
  alt="image for colorbindness test"
  style="width:200px; height:200px">
  <br>
  <input type="text" id="plate4" name="plate4" size="10">
  <br>

  <br>
  <img src="Plate5.gif"
  alt="image for colorbindness test"
  style="width:200px; height:200px">
  <br>
  <input type="text" id="plate5" name="plate5" size="10">
  <br>

	<br>
	The <b>Speaker</b> is trying to choose the prettiest color.
	<br>
	<input type="radio" name="sgoal" value="no"> True
	<br>
	<input type="radio" name="sgoal" value="yes"> False
	<br>

	<br>
	The <b>Speaker</b> is trying to send the color that they believe will best
	allow their partner to select the target word.
	<br>
	<input type="radio" name="lgoal" value="yes"> True
	<br>
	<input type="radio" name="lgoal" value="no"> False
	<br>

	<br>
	The <b>Listener</b> sees a totally different set of colors than the Speaker sees.
	<br>
	<input type="radio" name="comp" value="no"> True
	<br>
	<input type="radio" name="comp" value="yes"> False
	<br>

	<br>
	The same word may appear as the target more than once.
  <br>
  <input type="radio" name="completed" value="yes"> True
  <br>
  <input type="radio" name="completed" value="no"> False
  <br>

  <br>
  I am taking this experiment on a desktop or laptop computer and my screen is
  set to its default brightness and color temperature (e.g. flux is off) .
  <br>
  <input type="radio" name="settings" value="yes"> Yes
  <br>
  <input type="radio" name="settings" value="no"> No
  <br>

	<br>
	<input id="quiz_submit" type="submit" value="Submit">
	<br>
	<br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. Please read the instructions carefully and try again. </div>
      </div> <!-- /container -->
    </div>

    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var test1 = $("#plate2").val()
        var test2 = $("#plate4").val()
        var test3 = $("#plate5").val()
        var ans1 = $('input[name="sgoal"]:checked').val();
        var ans2 = $('input[name="lgoal"]:checked').val();
        var ans3 = $('input[name="comp"]:checked').val();
        var ans4 = $('input[name="completed"]:checked').val();
        var ans5 = $('input[name="settings"]:checked').val();
        var workerId = urlParams.workerId;
        var assignmentId = urlParams.assignmentId;
        var hitId = urlParams.hitId;
        var turkSubmitTo = urlParams.turkSubmitTo;
	var queryString = ("?workerId=" + workerId
			   + "&assignmentId=" + assignmentId
			   + "&hitId=" + hitId
			   + "&turkSubmitTo=" + turkSubmitTo)
        if(test1 !== "" && test2 !== "" && test3 !== "" &&
        ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&  ans4 == "yes" && ans5 == "yes") {
	  location.replace("./pass.html" + queryString);
        } else if(counter == 3) {
          location.replace("./fail.html" + queryString);
        } else {
          $('.error').show()
	  $('html,body').animate({scrollTop: document.body.scrollHeight},"fast");
          counter += 1;
        }
      };
    </script>
  </body>
</html>
